function Messages(bot, config) {
	this.bot = bot;
	this.client = bot.client;
	this.emitter = bot.emitter;
	this.config = config;
}

Messages.prototype.init = function() {
	var self = this;

	this.client.on('NOTICE', function(prefix, target, message) {
		if (u(prefix)) self.emitter.emit('notice', u(prefix)[1], message);
	});

	this.client.on('PRIVMSG', function(prefix, target, message) {
		var event = (target == self.bot.Plugins.Nick.currentNick) ? 'pm' : target;
		if (u(prefix)) self.emitter.emit(event, u(prefix)[1], message);
	});

	this.client.on('JOIN', function(prefix, channel) {
		if (u(prefix)) self.emitter.emit('join', u(prefix)[1], channel);
	});
};

function u(prefix) {
	return prefix.match(/:([^!]+)!/);
}

module.exports = Messages;

function Nick(bot, config) {
	this.bot = bot;
	this.client = bot.client;
	this.emitter = bot.emitter;
	this.config = config;

	this.nickMod = 0;
	this.currentNick = bot.config.nick;
	this.nickTimer = null;
	this.nickInterval = config.interval*1000;

	this.forced = false;
}

Nick.prototype.init = function() {
	var self = this;

	this.client.on('433', function() {
		if (!self.forced) {
			self.currentNick = self.bot.config.nick+(++self.nickMod);
			self.client.send('NICK', self.currentNick);
		}
		
		clearInterval(self.nickTimer);
		self.nickTimer = setTimeout(function() {
			self.__forceNick();
		}, self.nickInterval);
	});
};

Nick.prototype.__forceNick = function() {
	this.forced = true;
	this.client.send('NICK', this.bot.config.nick);
};

module.exports = Nick;
